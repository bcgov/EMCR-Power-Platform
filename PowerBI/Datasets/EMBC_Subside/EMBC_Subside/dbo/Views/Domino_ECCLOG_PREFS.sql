CREATE    VIEW dbo.Domino_ECCLOG_PREFS AS  SELECT *  FROM (   SELECT j.DocID as 'DocumentID', b.Name, ISNULL(b.Text, '') as [Text]   FROM dbo.DominoData j   CROSS APPLY OPENJSON (FormData) a   CROSS APPLY OPENJSON (a.value)    WITH (    [Name] VARCHAR(50)      ,[Text] VARCHAR(MAX)      ,[Values] NVARCHAR(MAX) AS JSON   ) b    where FormName = 'PREFS'     and isJson(FormData) =1  ) App  PIVOT   (    MAX([Text])  FOR [Name]IN ([$Fonts],[$Revisions],[$UpdatedBy],[Form],[OriginalModTime],[PREFS_DTree_Hazard],[PREFS_DTree_Wildfire],[PREFSAllOpenIncidentsReport],[PREFSArchiveDir],[PREFSArchiveServer],[PREFSASEAircraftTypes],[PREFSASENumberReport],[PREFSBCBCReport],[PREFSCallTypeCategories],[PREFSContactPhoneTypes],[PREFSCrystalInstallPath],[PREFSDailyTaskLog],[PREFSDGIRAffectedEnv],[PREFSDGIRReport],[PREFSDGIRSectors],[PREFSDGIRSpillers],[PREFSDGIRSpillTypes],[PREFSDGIRSubTypes],[PREFSECCDocNumReport],[PREFSEM2000Dir],[PREFSEM2000ServerName],[PREFSENVReport],[PREFSENVSubTypes],[PREFSEPSFrom],[PREFSEPSLogDir],[PREFSEPSSendTo],[PREFSERSBuild],[PREFSERSComplexion],[PREFSERSEyes],[PREFSERSGlasses],[PREFSERSHair],[PREFSERSRace],[PREFSERSSmoker],[PREFSERSViolationType],[PREFSEVENTLOGREPORT],[PREFSFaCTSPassword],[PREFSFaCTSRefDir],[PREFSFaCTSRefServer],[PREFSFaCTSServer],[PREFSFaCTSUserName],[PREFSGIRReport],[PREFSIncidentTypes],[PREFSLogDir],[PREFSLogServer],[PREFSMOESendTo],[PREFSMOFReport],[PREFSMOFSubTypes],[PREFSMOHReport],[PREFSMOHSubTypes],[PREFSMVAReport],[PREFSMVASubTypes],[PREFSMVIReport],[PREFSMVISubTypes],[PREFSNATRReport],[PREFSNATRSubTypes],[PREFSOFCEmailAddress],[PREFSOFCEmailCC],[PREFSOFCEmailFrom],[PREFSOFCLogDir],[PREFSOFCReport],[PREFSOFCSubTypes],[PREFSOFCTempLocation],[PREFSOGCTypes],[PREFSOTHERReport],[PREFSOTHERSubTypes],[PREFSOtherTaskingAgencyTypes],[PREFSOTHReport],[PREFSPORStatsReport],[PREFSPrimaryTaskingAgency],[PREFSPWORAction],[PREFSPWORAttractants],[PREFSPWORComplaint],[PREFSPWORLocation],[PREFSPWORSpecies],[PREFSPWORTempLocation],[PREFSRegionTaskNumbers],[PREFSRMBReport],[PREFSSARReport],[PREFSSARSubTypes],[PREFSSelection],[PREFSSRRCriminalCode],[PREFSSRREmailAddress],[PREFSSRREmailCC],[PREFSSRREmailFrom],[PREFSSRRLogDir],[PREFSSRRMVAct],[PREFSSRRTempLocation],[PREFSSUMMARYSTATSREPORT],[PREFSTaskNumberLabel],[PREFSTaskNumberLabelRange],[PREFSTaskNumberReport],[PREFSTrainingApplicationReport],[PREFSTrainingTaskCategories])) as PivotTable
