
CREATE    VIEW dbo.Domino_DFA_Call AS  SELECT *  FROM (   SELECT j.DocID as Doc_Id, b.Name, ISNULL(b.Text, '') as [Text]   FROM dbo.DominoData j   CROSS APPLY OPENJSON (FormData) a   CROSS APPLY OPENJSON (a.value)    WITH (    [Name] VARCHAR(50)      ,[Text] VARCHAR(MAX)      ,[Values] NVARCHAR(MAX) AS JSON   ) b    where FormName = 'Call'     and isJson(FormData) =1  ) App  PIVOT   (    MAX([Text])  FOR [Name]IN ([RevisedBy],[$Fonts],[Delete],[RecoveryStaff],[CityTown],[FirstName],[$Revisions],[Event],[AreaCode1],[Form],[AreaCode2],[$UpdatedBy],[$FILE],[OriginalModTime],[$REF],[$Conflict],[Comments],[AuthorizationNo],[DateRevised],[ApplicationStatusLU],[Phone1],[Called],[Surname],[StreetAddress],[PreparedDate],[ClaimType],[Phone2],[CallDate],[CreatedBy])) as PivotTable