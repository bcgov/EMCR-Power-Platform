CREATE    VIEW dbo.Domino_ECCLOG_ERSUpdate AS  SELECT *  FROM (   SELECT j.DocID as 'DocumentID', b.Name, ISNULL(b.Text, '') as [Text]   FROM dbo.DominoData j   CROSS APPLY OPENJSON (FormData) a   CROSS APPLY OPENJSON (a.value)    WITH (    [Name] VARCHAR(50)      ,[Text] VARCHAR(MAX)      ,[Values] NVARCHAR(MAX) AS JSON   ) b    where FormName = 'ERSUpdate'     and isJson(FormData) =1  ) App  PIVOT   (    MAX([Text])  FOR [Name]IN ([$REF],[$Revisions],[$UpdatedBy],[Address],[AltContactNo1],[AltContactNo1Type],[AltContactNo2],[AltContactNo2Type],[AltContactNo3],[AltContactNo3Type],[Area],[Caller],[City],[COORSNo],[Delete],[District],[docID],[Form],[FormName],[IncidentNumber],[IncidentTimeLogged],[IncidentType],[IncidentUpdateNo],[NtfReportData],[OccurrenceRegion],[OffenseDetails],[OffenseLocation],[OriginalModTime],[ParentDocID],[ParentUniversalID],[PostalCode],[PrimaryContactNo],[PrimaryContactNoType],[Readers],[ReferredBy],[ReportAuthor],[ReportAuthorPosition],[ReportDisplayDate],[ReportUpdateDisplayDate],[TaskCategory],[UniversalID],[UpdateTimeLogged],[UpdateTimeLoggedTEXT],[ViolationType])) as PivotTable
