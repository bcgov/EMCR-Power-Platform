CREATE    VIEW dbo.Domino_ECCLOG_TTN AS  SELECT *  FROM (   SELECT j.DocID as 'DocumentID', b.Name, ISNULL(b.Text, '') as [Text]   FROM dbo.DominoData j   CROSS APPLY OPENJSON (FormData) a   CROSS APPLY OPENJSON (a.value)    WITH (    [Name] VARCHAR(50)      ,[Text] VARCHAR(MAX)      ,[Values] NVARCHAR(MAX) AS JSON   ) b    where FormName = 'TTN'     and isJson(FormData) =1  ) App  PIVOT   (    MAX([Text])  FOR [Name]IN ([$PaperColor],[$PaperColorEx],[$Revisions],[$UpdatedBy],[Caller],[CopyToPEPHQ],[CopyToRegion],[DateofApplication],[DateofApplicationTEXT],[Delete],[Form],[FormName],[FundsCommitted],[IncidentArea],[IncidentRegion],[IncidentType],[JournalVoucherTo],[OriginalModTime],[ReportAuthor],[TaskCategory],[TaskDescription],[TaskDollarsAssigned],[TaskDollarsIssuedTo],[TaskDollarsRequestorPosition],[TaskNumber],[TrainingActivitiesCovered],[TrainingCaller],[TTNCASARA],[TTNComments],[TTNDateofTraining],[TTNNoDays],[TTNNoParticipants],[TTNOvertimeCash],[TTNOvertimeCTO],[TTNStaffAccomodationCost],[TTNStaffMealCost],[TTNStaffNames],[TTNStaffOtherCost1],[TTNStaffOtherCost1Desc],[TTNStaffOtherCost2],[TTNStaffOtherCost2Desc],[TTNStaffTotalCostEstimate],[TTNStaffTravelCost],[TTNTotalTaskCost],[TTNTrainingLocation],[TTNVolAccomodationCost],[TTNVolInstructorFees],[TTNVolMealCost],[TTNVolOtherCost1],[TTNVolOtherCost1Desc],[TTNVolOtherCost2],[TTNVolOtherCost2Desc],[TTNVolTotalCostEstimate],[TTNVolTravelCost],[TTNWCB],[UniversalID])) as PivotTable
