CREATE PROCEDURE ssma_oracle.dbms_lob$write_blob
  @LOB_LOC VARBINARY(MAX) OUTPUT, 
  @AMOUNT INT, 
  @OFFSET INT, 
  @BUFFER VARBINARY(MAX)
 as 
BEGIN
  IF len(@LOB_LOC) < @OFFSET
    SET @LOB_LOC = @LOB_LOC + 
          CAST(REPLICATE(CHAR(0), @OFFSET - len(@LOB_LOC) - 1) as VARBINARY(MAX)) +
          substring(@BUFFER,1,@AMOUNT)
  ELSE
    SET @LOB_LOC = CAST(STUFF(@LOB_LOC, @OFFSET, @AMOUNT, substring(@BUFFER,1,@AMOUNT)) as VARBINARY(MAX))
END;